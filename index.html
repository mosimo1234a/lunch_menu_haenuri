<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í•´ëˆ„ë¦¬ ì´ˆë“±í•™êµ ìš°ë¦¬ë“¤ì˜ ê³µê°„ ğŸ€ (ì”ë°˜ ì—†ëŠ” ë‚  ì¶”ê°€)</title>
<link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
<style>
    /* --- 1. CSS ë³€ìˆ˜ ë° ê¸°ë³¸ ì„¤ì • --- */
    :root {
        --color-apricot: #ffd9a8; --color-sky: #cceeff; --color-rose: #ffc9d4;
        --color-grass: #d2f6c9; --color-text-dark: #3a322b; 
        --color-card-bg: #ffffff; --color-border: #3a322b;
    }

    body {
        font-family: 'Jua', sans-serif;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        background-color: var(--color-apricot);
        color: var(--color-text-dark);
        background-image: url('data:image/svg+xml;utf8,<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="5" cy="5" r="1.5" fill="%23f6f0e9" opacity="0.8"/><path d="M15,15 L15,13 L15,11 L13,13 Z" fill="%23f6f0e9" opacity="0.6"/></svg>');
        background-size: 40px 40px;
    }

    /* --- 2. ì¹´ë“œ ë””ìì¸ --- */
    .card {
        background-color: var(--color-card-bg);
        border-radius: 35px;
        padding: 40px;
        border: 4px dashed var(--color-border);
        box-shadow: 6px 6px 0 0 var(--color-border); 
        text-align: center;
        width: 90%;
        max-width: 400px; 
        transform: rotate(-3deg);
        box-sizing: border-box;
    }
    
    p {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 30px;
        line-height: 1.2;
    }
    
    .date-text {
        font-size: 1.2rem; 
        font-weight: 600;
        margin-bottom: 10px; 
        color: var(--color-text-dark); 
        transform: rotate(1deg);
    }

    /* --- 3. ë²„íŠ¼ ë””ìì¸ --- */
    button {
        font-family: 'Jua', sans-serif;
        font-weight: bold;
        font-size: 1.2rem;
        padding: 12px 25px;
        margin: 8px;
        border-radius: 30px;
        border: 4px solid var(--color-border); 
        color: var(--color-border);
        cursor: pointer;
        box-shadow: 4px 4px 0px 0px var(--color-border);
        transform: rotate(2deg); 
        background-color: #fff;
        transition: all 0.1s; 
    }

    button:hover {
        transform: scale(1.02) rotate(2deg);
        box-shadow: 6px 6px 0px 0px var(--color-border);
    }

    button:active {
        transform: scale(0.97) rotate(1deg); 
        box-shadow: 2px 2px 0px 0px var(--color-border); 
    }

    #lunch-menu { 
        background-color: var(--color-rose); 
        transform: rotate(-4deg);
        width: 100%; 
    }
    #yes_btn { 
        background-color: var(--color-rose); 
        transform: rotate(-4deg); 
    }
    #no_btn { 
        background-color: var(--color-grass); 
    }
    #logout_btn, #back_btn { 
        background-color: var(--color-sky); 
    }
    
    /* --- 4. ë©”ì‹œì§€ ë° í‘œ ì˜ì—­ --- */
    .hidden { display: none; }
    .message {
        font-size: 1.6rem;
        font-weight: bold;
        margin-top: 20px;
        color: var(--color-text-dark);
        margin-bottom: 20px;
    }

    /* --- 5. í‘œ (Table) ë””ìì¸ --- */
    #menu_table_area {
        margin-top: 20px;
        padding: 10px;
        border: 2px dashed var(--color-rose);
        border-radius: 15px;
        background-color: #fffbf5;
    }
    #menu_table_area h3 {
        font-size: 1.3rem;
        margin-top: 0;
        margin-bottom: 10px;
        color: var(--color-rose);
        transform: rotate(-1deg);
    }
    #menu_table {
        width: 100%;
        border-collapse: collapse;
        font-size: 1rem;
    }
    #menu_table th, #menu_table td {
        border: 2px solid var(--color-border);
        padding: 8px 5px;
        text-align: center;
        background-color: #ffffff;
    }
    #menu_table th {
        background-color: var(--color-sky);
        color: var(--color-border);
        font-size: 1.1rem;
    }

    /* --- 6. ì œì‘ì ì •ë³´ ìŠ¤íƒ€ì¼ --- */
    #creator-info {
        font-size: 0.9rem;
        margin-top: 20px;
        color: var(--color-text-dark);
        opacity: 0.7;
    }
</style>
</head>
<body>
<div id="question" class="card">
    <p>í•´ëˆ„ë¦¬ ì´ˆë“±í•™êµ í•™ìƒì…ë‹ˆê¹Œ? ğŸ</p>
    <button id="yes_btn">ë„¤! ë§ìŠµë‹ˆë‹¤! ğŸ¥³</button>
    <button id="no_btn">ì•„ë‹™ë‹ˆë‹¤ ğŸ˜¥</button>
</div>

<div id="portal" class="card hidden">
    <p id="today-date-display" class="date-text"></p> 
    <p>ì˜¤ëŠ˜ì˜ ê¸‰ì‹ ë©”ë‰´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. ğŸš</p>
    <button id="lunch-menu">ê¸‰ì‹ ë©”ë‰´ ğŸš</button>
</div>

<div id="message_area" class="card hidden">
    <p id="message_text" class="message hidden"></p> 
    
    <div id="changeDateButtons" style="margin-bottom: 10px; display: flex; justify-content: space-around; width: 100%;">
        <button id="prev_day" style="background-color: var(--color-grass); transform: rotate(-1deg); font-size: 1rem; padding: 8px 15px; flex-grow: 1; margin: 5px;">â¬…ï¸ ì–´ì œ ê¸‰ì‹</button>
        <button id="next_day" style="background-color: var(--color-sky); transform: rotate(1deg); font-size: 1rem; padding: 8px 15px; flex-grow: 1; margin: 5px;">ë‚´ì¼ ê¸‰ì‹ â¡ï¸</button>
    </div>
    
    <div id="menu_table_area" class="hidden">
        <p id="no-waste-message" class="hidden" style="color: #FF5733; font-size: 1.5rem; transform: rotate(2deg); margin-bottom: 15px; background-color: #fff8e1; padding: 5px; border-radius: 10px; border: 2px solid #FF5733;">
            âœ¨ ì˜¤ëŠ˜ì€ ì”ë°˜ ì—†ëŠ” ë‚ ! ëª¨ë‘ ê¹¨ë—ì´ ë¨¹ì–´ìš”! âœ¨
        </p>
        
        <h3>ì˜¤ëŠ˜ì˜ ê¸‰ì‹ ë©”ë‰´</h3>
        <table id="menu_table">
            </table>

        <div id="vote-area" style="margin-top: 20px; padding: 10px; border-top: 2px dashed var(--color-sky);">
            <h4>ì˜¤ëŠ˜ ê¸‰ì‹ ë§Œì¡±ë„ íˆ¬í‘œ!</h4>
            <div id="vote-buttons">
                <button id="vote_up" data-vote="up" style="background-color: #a8ffb2; margin-right: 15px;">ğŸ‘ ìµœê³ !</button>
                <button id="vote_down" data-vote="down" style="background-color: #ffb8b8;">ğŸ‘ ë³„ë¡œ...</button>
            </div>
            <div id="vote-results" style="margin-top: 15px; font-size: 1.1rem; font-weight: bold;">
                í˜„ì¬ íˆ¬í‘œ ê²°ê³¼: <span id="result_up">0</span> / <span id="result_down">0</span>
            </div>
            <div id="vote-chart" style="height: 10px; background-color: #ddd; border-radius: 5px; margin-top: 10px;">
                </div>
        </div>
    </div>

    <button id="back_btn">ì´ì „ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
</div>

<p id="creator-info">Made by ê¹€ëŒ€ì›</p>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

<script>
// --- JavaScript ì‹œì‘ ---

// âœ¨ Firebase ì„¤ì • ê°ì²´ (âš ï¸ ë°˜ë“œì‹œ YOUR_... ë¶€ë¶„ì„ ë³¸ì¸ ê°’ìœ¼ë¡œ ë³€ê²½!) âœ¨
const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
};

// Firebase ì´ˆê¸°í™” ë° Firestore ì¸ìŠ¤í„´ìŠ¤ ìƒì„± (ì„¤ì • ê°ì²´ê°€ ìœ íš¨í•´ì•¼ ì‘ë™í•©ë‹ˆë‹¤)
let db = null;
try {
    const app = firebase.initializeApp(firebaseConfig);
    db = app.firestore();
} catch (e) {
    console.warn("Firebase ì´ˆê¸°í™” ì‹¤íŒ¨: API í‚¤ì™€ Project IDë¥¼ í™•ì¸í•˜ì„¸ìš”. íˆ¬í‘œ ê¸°ëŠ¥ì€ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
}


let currentDisplayDate = new Date();

const NEIS_CONFIG = {
    KEY: "59ff63a46d7f41bf97464e3caf3a486c", 
    ATPT_OFCDC_SC_CODE: "B10", 
    SD_SCHUL_CODE: "7130255", 
    URL: "https://open.neis.go.kr/hub/mealServiceDietInfo",
};

// --- API í˜¸ì¶œ í•¨ìˆ˜ (ìƒëµ) ---
async function fetchMealDataFromAPI(dateObj) { 
    
    const YYYYMMDD = `${dateObj.getFullYear()}${String(dateObj.getMonth() + 1).padStart(2, '0')}${String(dateObj.getDate()).padStart(2, '0')}`;
    
    const apiUrl = `${NEIS_CONFIG.URL}?KEY=${NEIS_CONFIG.KEY}&Type=json&pIndex=1&pSize=100` +
                   `&ATPT_OFCDC_SC_CODE=${NEIS_CONFIG.ATPT_OFCDC_SC_CODE}` +
                   `&SD_SCHUL_CODE=${NEIS_CONFIG.SD_SCHUL_CODE}&MLSV_YMD=${YYYYMMDD}`; 
                   
    try {
        const response = await fetch(apiUrl);
        if (!response.ok) {
            return { error: `[ì—ëŸ¬] ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: HTTP ${response.status}.` };
        }
        
        const data = await response.json();

        if (data.mealServiceDietInfo) {
            let menuString = data.mealServiceDietInfo[1].row[0].DDISH_NM;
            
            let menuArray = menuString
                .split('<br/>')
                .map(item => item.replace(/\([0-9\.]+\)/g, '').trim())
                .filter(item => item.length > 0); 
                
            return { success: true, menu: menuArray };
        } else if (data.RESULT && data.RESULT.CODE === 'INFO-200') {
            return { error: `[ê³µì§€] ${dateObj.getMonth() + 1}ì›” ${dateObj.getDate()}ì¼ ê¸‰ì‹ ì •ë³´ëŠ” ì°¾ì„ ìˆ˜ ì—†ëŠ”ë°, í˜¹ì‹œ í•™êµë¥¼ ì•ˆê°€ëŠ”ë‚  ì•„ë‹ê¹Œìš”? ğŸ¤”` };
        } else if (data.RESULT && data.RESULT.MESSAGE) {
            return { error: `[NEIS ì—ëŸ¬] ${data.RESULT.MESSAGE}` }; 
        }
        else {
            return { error: `[ì—ëŸ¬] ì•Œ ìˆ˜ ì—†ëŠ” API ì‘ë‹µ í˜•ì‹ì…ë‹ˆë‹¤.` };
        }
    } catch (error) {
        console.error("Fetch ë˜ëŠ” JSON íŒŒì‹± ì˜¤ë¥˜:", error);
        return { error: `[ì—ëŸ¬] ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì¹˜ëª…ì ì¸ ì˜¤ë¥˜ ë°œìƒ: ${error.message}` }; 
    }
}

// --- í‘œ(Table)ë¥¼ ìƒì„±í•˜ì—¬ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜ (ìƒëµ) ---
function displayMenuAsTable(menuArray) {
    const tableBody = document.querySelector('#menu_table');
    tableBody.innerHTML = ''; 

    const headerRow = tableBody.insertRow();
    headerRow.innerHTML = '<th>No.</th><th>ë©”ë‰´</th>';

    menuArray.forEach((item, index) => {
        const row = tableBody.insertRow();
        const cellNo = row.insertCell();
        const cellMenu = row.insertCell();
        cellNo.textContent = index + 1;
        cellMenu.textContent = item;
    });
}

// --- ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ê°€ì ¸ì™€ HTMLì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜ (ìƒëµ) ---
function displayTodayDate() {
    const today = currentDisplayDate; 
    const year = today.getFullYear();
    const month = today.getMonth() + 1; 
    const date = today.getDate();
    const day = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '][today.getDay()];
    
    const todayActual = new Date();
    const isToday = todayActual.toDateString() === today.toDateString(); 
    
    const datePrefix = isToday ? "ì˜¤ëŠ˜ì˜" : `${month}ì›” ${date}ì¼ì˜`;

    const formattedDate = `${datePrefix} ê¸‰ì‹ ë©”ë‰´ (${year}ë…„ ${String(month).padStart(2, '0')}ì›” ${String(date).padStart(2, '0')}ì¼ (${day}))`;
    
    const dateElement = document.getElementById('today-date-display');
    if (dateElement) {
        dateElement.textContent = formattedDate;
    }
}


// --- UI ìš”ì†Œ ë° ìƒíƒœ ê´€ë¦¬ ë¡œì§ ---
const UI = {
    screens: { 
        question: document.getElementById("question"), 
        portal: document.getElementById("portal"), 
        message_area: document.getElementById("message_area") 
    }, 
    elements: { 
        body: document.body, 
        message_text: document.getElementById("message_text"), 
        back_btn: document.getElementById("back_btn"), 
        yes_btn: document.getElementById("yes_btn"), 
        no_btn: document.getElementById("no_btn"),
        lunch_menu_btn: document.getElementById("lunch-menu"),
        menu_table_area: document.getElementById("menu_table_area"),
        prev_btn: document.getElementById("prev_day"), 
        next_btn: document.getElementById("next_day"),
        
        // âœ¨ ì”ë°˜ ì—†ëŠ” ë‚  ë©”ì‹œì§€ ìš”ì†Œ ì¶”ê°€ âœ¨
        no_waste_msg: document.getElementById("no-waste-message"), 

        // íˆ¬í‘œ ê´€ë ¨ ìš”ì†Œ
        vote_up_btn: document.getElementById("vote_up"),
        vote_down_btn: document.getElementById("vote_down"),
        result_up_span: document.getElementById("result_up"),
        result_down_span: document.getElementById("result_down"),
        vote_chart: document.getElementById("vote-chart"),
        vote_area: document.getElementById("vote-area")
    }
};

// --- íˆ¬í‘œ ê¸°ëŠ¥ ë¡œì§ í•¨ìˆ˜ (Firebase ì„¤ì •ì´ ìœ íš¨í•  ë•Œë§Œ ì‘ë™) ---
function updateVoteUI(upCount, downCount) {
    if (!db) return; // DBê°€ ì—†ìœ¼ë©´ ì‘ë™ ì¤‘ì§€
    UI.elements.result_up_span.textContent = upCount;
    UI.elements.result_down_span.textContent = downCount;
    
    const total = upCount + downCount;
    let upPercentage = total > 0 ? (upCount / total) * 100 : 50; 
    
    UI.elements.vote_chart.innerHTML = `
        <div style="width: ${upPercentage}%; height: 100%; border-radius: 5px; 
                   background-color: #4CAF50; transition: width 0.5s;"></div>
    `;
}

async function castVote(type) {
    if (!db) {
        alert("íˆ¬í‘œ ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. Firebase ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
        return;
    }
    const dateStr = `${currentDisplayDate.getFullYear()}${String(currentDisplayDate.getMonth() + 1).padStart(2, '0')}${String(currentDisplayDate.getDate()).padStart(2, '0')}`;
    const voteDocRef = db.collection("meal_votes").doc(dateStr);
    
    try {
        await db.runTransaction(async (transaction) => {
            const doc = await transaction.get(voteDocRef);
            
            if (!doc.exists) {
                transaction.set(voteDocRef, { up: type === 'up' ? 1 : 0, down: type === 'down' ? 1 : 0 });
            } else {
                const currentUp = doc.data().up || 0;
                const currentDown = doc.data().down || 0;
                
                if (type === 'up') {
                    transaction.update(voteDocRef, { up: currentUp + 1 });
                } else {
                    transaction.update(voteDocRef, { down: currentDown + 1 });
                }
            }
        });
        alert("íˆ¬í‘œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‘");
        UI.elements.vote_up_btn.disabled = true;
        UI.elements.vote_down_btn.disabled = true;
        
    } catch (e) {
        console.error("íˆ¬í‘œ íŠ¸ëœì­ì…˜ ì‹¤íŒ¨:", e);
        alert("íˆ¬í‘œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
    }
}

function subscribeToVotes() {
    if (!db) return; // DBê°€ ì—†ìœ¼ë©´ êµ¬ë… ì¤‘ì§€

    const dateStr = `${currentDisplayDate.getFullYear()}${String(currentDisplayDate.getMonth() + 1).padStart(2, '0')}${String(currentDisplayDate.getDate()).padStart(2, '0')}`;
    const voteDocRef = db.collection("meal_votes").doc(dateStr);

    // ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
    voteDocRef.onSnapshot((doc) => {
        if (doc.exists) {
            const data = doc.data();
            updateVoteUI(data.up || 0, data.down || 0);
        } else {
            updateVoteUI(0, 0);
        }
    }, (error) => {
        console.error("ì‹¤ì‹œê°„ íˆ¬í‘œ êµ¬ë… ì˜¤ë¥˜:", error);
    });
}


const StateManager = {
    showScreen: function(screenId, stateClass = '') {
        Object.values(UI.screens).forEach(el => el.classList.add("hidden"));
        UI.screens[screenId].classList.remove("hidden");
        UI.elements.body.classList.remove("access-state", "deny-state");
        if (stateClass) UI.elements.body.classList.add(stateClass);
    },
    
    showMealMenu: async function(prevId, stateClass) {
        this.showScreen("message_area", stateClass);
        
        displayTodayDate(); 
        document.querySelector('#menu_table_area h3').textContent = "ê¸‰ì‹ ë©”ë‰´"; 
        
        // ğŸš¨ ì”ë°˜ ì—†ëŠ” ë‚  ì²´í¬ ë¡œì§
        const isWednesday = currentDisplayDate.getDay() === 3; // 0=ì¼, 3=ìˆ˜
        if (isWednesday) {
            UI.elements.no_waste_msg.classList.remove("hidden");
        } else {
            UI.elements.no_waste_msg.classList.add("hidden");
        }

        // ë°ì´í„° ë¡œë”© ì¤‘ì—ëŠ” í‘œ ì˜ì—­ë§Œ ìˆ¨ê¸°ê³ , ë©”ì‹œì§€ë¥¼ í‘œì‹œ
        UI.elements.menu_table_area.classList.add("hidden");
        UI.elements.message_text.classList.remove("hidden"); 
        UI.elements.message_text.textContent = "ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤... â³";
        
        const result = await fetchMealDataFromAPI(currentDisplayDate); 
        
        if (result.success) {
            displayMenuAsTable(result.menu);
            UI.elements.message_text.classList.add("hidden");
            // ì„±ê³µí•˜ë©´ í‘œ ì˜ì—­ì„ ë‹¤ì‹œ í‘œì‹œ
            UI.elements.menu_table_area.classList.remove("hidden"); 
            
            // íˆ¬í‘œ ê¸°ëŠ¥ ë¡œì§
            UI.elements.vote_area.classList.remove("hidden"); 
            subscribeToVotes(); 
            UI.elements.vote_up_btn.disabled = false;
            UI.elements.vote_down_btn.disabled = false;

        } else {
            UI.elements.message_text.textContent = result.error;
            // ì‹¤íŒ¨í•˜ë©´ í‘œ ì˜ì—­ê³¼ íˆ¬í‘œ ì˜ì—­ì„ ìˆ¨ê¹€
            UI.elements.menu_table_area.classList.add("hidden"); 
            UI.elements.vote_area.classList.add("hidden");
        }

        UI.elements.back_btn.onclick = () => {
            currentDisplayDate = new Date(); 
            this.showScreen(prevId, 'access-state');
        }
    },
    
    showDenyMessage: function() {
        this.showScreen("message_area", "deny-state");
        UI.elements.menu_table_area.classList.add("hidden");
        UI.elements.message_text.classList.remove("hidden");
        UI.elements.message_text.textContent = "ì•„ì§ í•´ëˆ„ë¦¬ ì¹œêµ¬ê°€ ì•„ë‹ˆêµ°ìš”! ë‹¤ìŒì— ê¼­ ë§Œë‚˜ìš”! ğŸ‘‹";
        
        UI.elements.back_btn.onclick = () => this.showScreen("question", "deny-state");
    },
    
    changeDateAndReload: function(days) {
        currentDisplayDate.setDate(currentDisplayDate.getDate() + days); 
        this.showMealMenu("portal", "access-state"); 
    },
    
    initEventListeners: function() {
        // ... (ë„¤/ì•„ë‹ˆì˜¤, ê¸‰ì‹ ë©”ë‰´, ë‚ ì§œ ì´ë™ ë²„íŠ¼ ë¦¬ìŠ¤ë„ˆ)
        UI.elements.yes_btn.addEventListener("click", () => {
            currentDisplayDate = new Date(); 
            this.showScreen("portal", "access-state");
        });
        UI.elements.no_btn.addEventListener("click", () => {
            this.showDenyMessage();
        });
        UI.elements.lunch_menu_btn.addEventListener("click", () => {
            this.showMealMenu("portal", "access-state");
        });
        UI.elements.prev_btn.addEventListener("click", () => {
            this.changeDateAndReload(-1); 
        });
        UI.elements.next_btn.addEventListener("click", () => {
            this.changeDateAndReload(1); 
        });

        // íˆ¬í‘œ ë²„íŠ¼ ë¦¬ìŠ¤ë„ˆ
        if (UI.elements.vote_up_btn) {
            UI.elements.vote_up_btn.addEventListener("click", () => {
                castVote('up');
            });
            UI.elements.vote_down_btn.addEventListener("click", () => {
                castVote('down');
            });
        }

        // ëŒì•„ê°€ê¸° ë²„íŠ¼ (ì´ˆê¸° ìƒíƒœ)
        UI.elements.back_btn.onclick = () => {
            currentDisplayDate = new Date(); 
            this.showScreen("question", "deny-state");
        }
    }
};

// --- ì‹œìŠ¤í…œ ì´ˆê¸°í™” ---
StateManager.initEventListeners();
displayTodayDate(); 
</script>
</body>
</html>
